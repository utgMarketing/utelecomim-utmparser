"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}(function(root,factory){if(typeof define==="function"&&define.amd){define([],factory)}else if((typeof module==="undefined"?"undefined":_typeof(module))==="object"&&module.exports){module.exports=factory()}else{root.UtmParser=factory()}})(window,(function(){var UtmParser=function(){function UtmParser(){_classCallCheck(this,UtmParser)}_createClass(UtmParser,null,[{key:"init",value:function init(){var store=UtmParser.getAllStorage();var parsed={utm_source:UtmParser.getParamFromUri("utm_source"),utm_campaign:UtmParser.getParamFromUri("utm_campaign"),utm_medium:UtmParser.getParamFromUri("utm_medium"),utm_term:UtmParser.getParamFromUri("utm_term"),utm_content:UtmParser.getParamFromUri("utm_content")};if(parsed.utm_source)store.utm_source=parsed.utm_source;if(parsed.utm_campaign)store.utm_campaign=parsed.utm_campaign;if(parsed.utm_medium)store.utm_medium=parsed.utm_medium;if(parsed.utm_term)store.utm_term=parsed.utm_term;if(parsed.utm_content)store.utm_content=parsed.utm_content;if(parsed.utm_source==="")store.utm_source=null;if(parsed.utm_campaign==="")store.utm_campaign=null;if(parsed.utm_medium==="")store.utm_medium=null;if(parsed.utm_term==="")store.utm_term=null;if(parsed.utm_content==="")store.utm_content=null;localStorage.setItem(UtmParser._storage_name,JSON.stringify(store))}},{key:"getUtmSource",value:function getUtmSource(){return UtmParser._get("utm_source")}},{key:"getUtmCampaign",value:function getUtmCampaign(){return UtmParser._get("utm_campaign")}},{key:"getUtmMedium",value:function getUtmMedium(){return UtmParser._get("utm_medium")}},{key:"getUtmTerm",value:function getUtmTerm(){return UtmParser._get("utm_term")}},{key:"getUtmContent",value:function getUtmContent(){return UtmParser._get("utm_content")}},{key:"_get",value:function _get(key){return UtmParser.getParamFromStorage(key)}},{key:"getParamFromUri",value:function getParamFromUri(key){var fallback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var query=window.location.search.substring(1);var vars=query.split("&");for(var i=0;i<vars.length;i++){var pair=vars[i].split("=");if(pair[0]===key){return pair[1]}}return fallback}},{key:"getParamFromStorage",value:function getParamFromStorage(key){var fallback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var store=UtmParser.getAllStorage();return store[key]||fallback}},{key:"getAllStorage",value:function getAllStorage(){try{return JSON.parse(localStorage.getItem(UtmParser._storage_name)||"{}")}catch(e){return{}}}}]);return UtmParser}();UtmParser._storage_name="__utm_storage";return UtmParser}));